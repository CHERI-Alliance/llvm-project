; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: %cheri_llc %s -o - -relocation-model=pic | FileCheck %s

@n = common global ptr addrspace(200) null, align 32

; Function Attrs: nounwind
define void @set(ptr addrspace(200) %h) #0 {
; CHECK-LABEL: set:
; CHECK:       # %bb.0:
; CHECK-NEXT:    lui $1, %hi(%neg(%gp_rel(set)))
; CHECK-NEXT:    daddu $1, $1, $25
; CHECK-NEXT:    daddiu $1, $1, %lo(%neg(%gp_rel(set)))
; CHECK-NEXT:    ld $1, %got_disp(n)($1)
; CHECK-NEXT:    clc $c1, $1, 0($ddc)
; CHECK-NEXT:    jr $ra
; CHECK-NEXT:    csc $c3, $zero, 0($c1)
  %1 = load ptr addrspace(200), ptr @n, align 32
  store ptr addrspace(200) %h, ptr addrspace(200) %1, align 32
  ret void
}

attributes #0 = { nounwind }
